<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>استيراد المنتجات إلى Firebase</title>
    <!-- Bootstrap 5 RTL CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="container py-5">
        <h1 class="text-center mb-5">استيراد المنتجات إلى قاعدة البيانات</h1>

        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">استيراد بيانات المنتجات</h5>
            </div>
            <div class="card-body">
                <p class="card-text">سيتم استيراد جميع المنتجات من ملف النسخ الاحتياطي إلى قاعدة بيانات Firebase.</p>
                <button id="importBtn" class="btn btn-success">
                    <i class="fas fa-database me-2"></i> بدء الاستيراد
                </button>
                <div id="progress" class="mt-3 d-none">
                    <div class="progress">
                        <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated"
                            role="progressbar" style="width: 0%"></div>
                    </div>
                    <div id="status" class="mt-2 text-center"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap & Firebase JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "guzel-1f032.firebaseapp.com",
            databaseURL: "https://guzel-1f032-default-rtdb.firebaseio.com",
            projectId: "guzel-1f032",
            storageBucket: "guzel-1f032.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const productsRef = database.ref('products');

        // Database backup data
        const databaseBackup = {
            "products": {
                "1": {
                    "id": "1",
                    "name": "عطر كلاسيك مان",
                    "description": "عطر رجالى أنيق بنفحات خشبية منعشة.",
                    "price": 1100,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "man",
                    "meta_desc": "عطر كلاسيك مان - عطر رجالي فاخر بنفحات خشبية",
                    "best_seller": true
                },
                "2": {
                    "id": "2",
                    "name": "عطر مودرن سبيريت",
                    "description": "عطر عصري يدوم طويلاً مع لمسة من الحمضيات.",
                    "price": 1200,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "man",
                    "meta_desc": "عطر مودرن سبيريت - عطر رجالي عصري بنفحات حمضيات",
                    "best_seller": true
                },
                "3": {
                    "id": "3",
                    "name": "عطر ليالي الشرق",
                    "description": "مزيج شرقي فاخر يعكس الرجولة.",
                    "price": 1350,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "man",
                    "meta_desc": "عطر ليالي الشرق - عطر رجالي شرقي فاخر",
                    "best_seller": false
                },
                "4": {
                    "id": "4",
                    "name": "عطر فواكه الصيف",
                    "description": "انتعاش الفواكه مع لمسة عصرية تدوم طوال اليوم.",
                    "price": 1050,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "man",
                    "meta_desc": "عطر فواكه الصيف - عطر رجالي بنفحات فواكه منعشة",
                    "best_seller": false
                },
                "5": {
                    "id": "5",
                    "name": "عطر عبق الشرق",
                    "description": "نفحات شرقية أصيلة مع لمسة من الفانيليا.",
                    "price": 1200,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "man",
                    "meta_desc": "عطر عبق الشرق - عطر رجالي شرقي مع الفانيليا",
                    "best_seller": true
                },
                "6": {
                    "id": "6",
                    "name": "عطر روز جولد",
                    "description": "عبير الزهور مع لمسة فاخرة تناسب جميع الأوقات.",
                    "price": 1100,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "man",
                    "meta_desc": "عطر روز جولد - عطر رجالي زهري فاخر",
                    "best_seller": false
                },
                "7": {
                    "id": "7",
                    "name": "عطر أمبر نايت",
                    "description": "نفحات العنبر الدافئة مع لمسة خشبية فاخرة.",
                    "price": 1250,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "man",
                    "meta_desc": "عطر أمبر نايت - عطر رجالي بعنبر دافئ",
                    "best_seller": true
                },
                "8": {
                    "id": "8",
                    "name": "عطر روز ديفا",
                    "description": "عطر زهري ناعم يدوم طوال اليوم.",
                    "price": 1150,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر روز ديفا - عطر نسائي زهري ناعم",
                    "best_seller": true
                },
                "9": {
                    "id": "9",
                    "name": "عطر فواكه الحب",
                    "description": "انتعاش الفواكه مع لمسة أنثوية ساحرة.",
                    "price": 1250,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر فواكه الحب - عطر نسائي بنفحات فواكه",
                    "best_seller": true
                },
                "10": {
                    "id": "10",
                    "name": "عطر ملكة الليل",
                    "description": "رائحة غنية تعكس الفخامة والأنوثة.",
                    "price": 1300,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر ملكة الليل - عطر نسائي فاخر",
                    "best_seller": true
                },
                "11": {
                    "id": "11",
                    "name": "عطر فواكه الصيف النسائي",
                    "description": "انتعاش الفواكه مع لمسة عصرية تدوم طوال اليوم.",
                    "price": 1050,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر فواكه الصيف النسائي - عطر نسائي منعش",
                    "best_seller": false
                },
                "12": {
                    "id": "12",
                    "name": "عطر عبق الشرق النسائي",
                    "description": "نفحات شرقية أصيلة مع لمسة من الفانيليا النسائية.",
                    "price": 1200,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر عبق الشرق النسائي - عطر نسائي شرقي",
                    "best_seller": true
                },
                "101": {
                    "id": "13",
                    "name": "عطر روز ديفا",
                    "description": "عطر زهري ناعم يدوم طوال اليوم.",
                    "price": 1150,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر روز ديفا - عطر نسائي زهري ناعم",
                    "best_seller": true
                },
                "102": {
                    "id": "14",
                    "name": "عطر فواكه الحب",
                    "description": "انتعاش الفواكه مع لمسة أنثوية ساحرة.",
                    "price": 1250,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر فواكه الحب - عطر نسائي بنفحات فواكه",
                    "best_seller": true
                },
                "103": {
                    "id": "15",
                    "name": "عطر ملكة الليل",
                    "description": "رائحة غنية تعكس الفخامة والأنوثة.",
                    "price": 1300,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر ملكة الليل - عطر نسائي فاخر",
                    "best_seller": false
                },
                "104": {
                    "id": "16",
                    "name": "عطر فواكه الصيف",
                    "description": "انتعاش الفواكه مع لمسة عصرية تدوم طوال اليوم.",
                    "price": 1050,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر فواكه الصيف - عطر نسائي منعش",
                    "best_seller": false
                },
                "105": {
                    "id": "17",
                    "name": "عطر عبق الشرق",
                    "description": "نفحات شرقية أصيلة مع لمسة من الفانيليا.",
                    "price": 1200,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر عبق الشرق - عطر نسائي شرقي",
                    "best_seller": true
                },
                "106": {
                    "id": "18",
                    "name": "عطر روز جولد",
                    "description": "عبير الزهور مع لمسة فاخرة تناسب جميع الأوقات.",
                    "price": 1100,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر روز جولد - عطر نسائي زهري فاخر",
                    "best_seller": true
                },
                "107": {
                    "id": "19",
                    "name": "عطر أمبر نايت",
                    "description": "نفحات العنبر الدافئة مع لمسة خشبية فاخرة.",
                    "price": 1250,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر أمبر نايت - عطر نسائي بعنبر دافئ",
                    "best_seller": false
                },
                "108": {
                    "id": "20",
                    "name": "عطر روز ديفا",
                    "description": "عطر زهري ناعم يدوم طوال اليوم.",
                    "price": 1150,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر روز ديفا - عطر نسائي زهري ناعم",
                    "best_seller": true
                },
                "109": {
                    "id": "21",
                    "name": "عطر فواكه الحب",
                    "description": "انتعاش الفواكه مع لمسة أنثوية ساحرة.",
                    "price": 1250,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر فواكه الحب - عطر نسائي بنفحات فواكه",
                    "best_seller": false
                },
                "110": {
                    "id": "22",
                    "name": "عطر عبق الشرق النسائي",
                    "description": "نفحات شرقية أصيلة مع لمسة من الفانيليا.",
                    "price": 1200,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر عبق الشرق النسائي - عطر نسائي شرقي",
                    "best_seller": true
                },
                "111": {
                    "id": "23",
                    "name": "عطر روز جولد النسائي",
                    "description": "عبير الزهور مع لمسة فاخرة تناسب جميع الأوقات.",
                    "price": 1100,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر روز جولد النسائي - عطر نسائي زهري فاخر",
                    "best_seller": true
                },
                "112": {
                    "id": "24",
                    "name": "عطر أمبر نايت النسائي",
                    "description": "نفحات العنبر الدافئة مع لمسة خشبية فاخرة.",
                    "price": 1250,
                    "discount": 0,
                    "image": "./assets/main_product.jpg",
                    "category": "women",
                    "meta_desc": "عطر أمبر نايت النسائي - عطر نسائي بعنبر دافئ",
                    "best_seller": false
                }
            }
        };

        // Import products function
        async function importProducts() {
            const importBtn = document.getElementById('importBtn');
            const progress = document.getElementById('progress');
            const progressBar = document.getElementById('progressBar');
            const status = document.getElementById('status');

            importBtn.disabled = true;
            progress.classList.remove('d-none');

            const products = databaseBackup.products;
            const productIds = Object.keys(products);
            const totalProducts = productIds.length;
            let importedCount = 0;

            status.textContent = `جاري استيراد 0 من ${totalProducts} منتج...`;

            // Import each product one by one
            for (const productId of productIds) {
                try {
                    await productsRef.child(productId).set(products[productId]);
                    importedCount++;

                    // Update progress
                    const progressPercent = Math.round((importedCount / totalProducts) * 100);
                    progressBar.style.width = `${progressPercent}%`;
                    status.textContent = `جاري استيراد ${importedCount} من ${totalProducts} منتج...`;

                } catch (error) {
                    console.error(`Error importing product ${productId}:`, error);
                }
            }

            // Complete
            progressBar.classList.remove('progress-bar-animated');
            progressBar.classList.add('bg-success');
            status.textContent = `تم استيراد ${importedCount} منتج بنجاح!`;
            importBtn.disabled = false;
        }

        // Add event listener to import button
        document.getElementById('importBtn').addEventListener('click', importProducts);
    </script>
</body>

</html>